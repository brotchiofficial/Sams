<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Dashboard</title>
  <style>
    :root {
      --bg:#2B2B3D; --card:#3a3a50; --primary:#007BFF; --accent:#4CAF50; --danger:#dc3545; --text:#f0f0f0;
    }
    body {margin:0; display:flex; height:100vh; background:var(--bg); color:var(--text); font-family:Arial,sans-serif;}
    #sidebar-left,#sidebar-right {width:280px; background:#1e1e2a; padding:15px; overflow-y:auto;}
    #sidebar-left h2,#sidebar-right h2 {text-align:center; margin:10px 0;}
    #userList,#patientList {list-style:none; padding:0; margin:0;}
    #userList li,#patientList li {background:var(--card); margin:6px 0; padding:10px; border-radius:10px; display:flex; justify-content:space-between; align-items:center;}
    .circle {width:10px; height:10px; border-radius:50%; display:inline-block; margin-right:6px;}
    .off {border:2px solid white;} .on {background:var(--accent);}
    #content {flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center;}
    .card {background:var(--card); padding:25px; border-radius:15px; box-shadow:0 0 15px rgba(0,0,0,0.4); width:420px; text-align:center; margin-bottom:20px;}
    button {padding:10px; border:none; border-radius:8px; cursor:pointer; font-weight:bold; margin:5px 0; width:90%;}
    #startService{background:var(--accent); color:white;} #stopService{background:var(--danger);} #changePwd{background:var(--primary);} #logoutBtn{background:#6c757d;}
    #modalOverlay{display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.7); justify-content:center; align-items:center;}
    #modal{background:var(--card); padding:20px; border-radius:12px; width:600px; max-height:90%; overflow-y:auto;}
    #modal h2{text-align:center;}
    label{display:block; margin-top:10px;}
    input,select{width:95%; padding:8px; border-radius:6px; border:none; margin-top:4px;}
    #modal button{width:100%; margin-top:10px;}
  </style>
</head>
<body>
  <div id="sidebar-left">
    <h2>Joueurs</h2>
    <ul id="userList"></ul>
  </div>
  <div id="content">
    <div class="card">
      <h1 id="welcome"></h1>
      <p id="gradeInfo"></p>
      <p>Total heures : <span id="totalHours">0</span> h</p>
      <p>Cette semaine : <span id="weeklyHours">0</span> h</p>
      <p>Timer : <span id="timer">00:00</span> <span id="statusIcon"></span></p>
      <button id="startService">Commencer</button>
      <button id="stopService">Finir</button>
      <button id="changePwd">Changer mot de passe</button>
      <button id="logoutBtn" onclick="logout()">⬅ Déconnexion</button>
    </div>
    <div class="card" id="adminPanel" style="display:none;">
      <h2>Panel Admin</h2>
      <button id="deleteAllUsers" style="background:var(--danger);">Supprimer tous les joueurs</button>
      <table style="width:100%;margin-top:10px;color:white;"><thead><tr><th>Pseudo</th><th>Date</th><th>Grade</th><th>Action</th></tr></thead><tbody id="adminUserList"></tbody></table>
    </div>
  </div>
  <div id="sidebar-right" style="display:none;">
    <h2>Patients</h2>
    <button id="createPatientBtn" style="background:var(--primary);color:white;">Créer une fiche patient</button>
    <input type="text" id="searchPatient" placeholder="Rechercher...">
    <ul id="patientList"></ul>
  </div>
  <div id="modalOverlay"><div id="modal"><h2>Nouvelle fiche patient</h2><form id="patientForm"></form><button id="closeModal">Annuler</button></div></div>
</body>
</html>