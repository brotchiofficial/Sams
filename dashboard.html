<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Dashboard v16.7</title>
</head>
<body>
  <h1>Dashboard</h1>
  <button id="logoutBtn">Déconnexion</button>

  <script type="module">
    // Vérifier si reload manuel (F5)
    const navEntries = performance.getEntriesByType("navigation");
    if (navEntries.length > 0 && navEntries[0].type === "reload") {
      localStorage.removeItem("currentUser");
      window.location.href = "index.html";
    }

    // Vérifier si utilisateur connecté
    const savedUser = localStorage.getItem("currentUser");
    if (!savedUser) {
      window.location.href = "index.html";
    }

    // Déconnexion par bouton
    document.getElementById("logoutBtn").addEventListener("click", () => {
      localStorage.removeItem("currentUser");
      window.location.href = "index.html";
    });

    // TODO: Intégrer logique Firestore complète (timer, joueurs, patients CRUD, admin)
  </script>
</body>
</html>